(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"37e8f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",{staticClass:"q-pa-md"},[r("ConfirmModal",{attrs:{label:"вы действительно хотите подать заявку",show:e.showModal,"button-cancel":"не хочу","button-ok":"подать"},on:{onOk:e.sendProposal}}),r("OrderHeader",{attrs:{body:e.currentOrder.body,price:e.currentOrder.price,description:e.currentOrder.description,title:e.currentOrder.title,address:e.currentOrder.address,customer:e.currentOrder.customer,"due-date":e.currentOrder.dueDate,"due-time":e.currentOrder.dueTime,status:e.currentOrder.status}}),e.isShowInfoBlock?[e.isShowButton?r("q-card",{staticClass:"my-card q-mt-md"},[r("div",{staticClass:"flex justify-around q-pt-md q-pb-md "},[e.isCustomer?r("q-btn",{attrs:{color:"primary",label:"редактировать заказ",disable:e.isLoading},on:{click:e.editOrder}},[e._v("\n             \n            "),r("q-icon",{attrs:{right:"",size:"2em",name:"edit"}})],1):e._e(),e.currentOrder.selectedPerformer?e._e():r("q-btn",{attrs:{color:"purple",label:"взять заказ",disable:e.isLoading},on:{click:function(t){e.showModal=!e.showModal}}},[e._v("\n             \n            "),r("q-icon",{attrs:{right:"",size:"2em",name:"schedule_send"}})],1)],1)]):e._e(),r("q-card",{staticClass:"my-card q-mt-md"},[r("h6",{staticClass:"no-margin text-center"},[e._v("\n          заявки поданные на текущий заказ\n        ")]),r("q-separator"),e.isLoading?r("div",{staticClass:"flex justify-center"},[r("q-spinner-hourglass",{attrs:{color:"purple",size:"4em"}})],1):[e.countPerformers?e._l(e.currentOrder.listOfPerformers,(function(t){return r("PerformerInfoBlock",{key:t.id,attrs:{name:t.name,slug:t.id},on:{acceptApplication:e.acceptApplication,rejectApplication:e.rejectApplication}})})):r("q-banner",{staticClass:"bg-secondary text-white text-center",attrs:{rounded:""}},[e._v("\n            пока никто не подал заявок\n          ")])]],2)]:e._e(),e.victoryShow?[r("q-card",{staticClass:"my-card q-mt-md"},[r("q-banner",{staticClass:"bg-grey-3",scopedSlots:e._u([{key:"avatar",fn:function(){return[r("q-icon",{attrs:{name:"emoji_events",color:"primary"}})]},proxy:!0}],null,!1,3220151014)},[e._v("\n          Ваш заказ выполняет\n          "),r("q-chip",{staticClass:"q-ml-md",attrs:{square:""}},[r("q-avatar",[r("img",{attrs:{src:"https://cdn.quasar.dev/img/boy-avatar.png"}})]),e._v("\n            "+e._s(e.victoryName)+"\n          ")],1)],1)],1)]:e._e()],2)},n=[],s=r("2f62"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-dialog",{attrs:{persistent:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("q-card",[r("q-card-section",{staticClass:"text-center q-pb-none"},[r("q-avatar",{attrs:{icon:"error_outline",color:"orange","text-color":"white"}})],1),r("q-card-section",[r("span",{staticClass:"q-ml-sm"},[e._v("\n          "+e._s(e.label)+"\n        ")])]),r("q-card-actions",{attrs:{align:"center"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.buttonCancel,color:"purple"}}),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.buttonOk,color:"purple"},on:{click:e.onOk}})],1)],1)],1)},o=[],c={name:"ConfirmModal",props:{show:{type:Boolean,required:!0},label:{type:String,required:!0},buttonCancel:{type:String,required:!0},buttonOk:{type:String,required:!0}},methods:{onOk(){this.$emit("onOk")}}},l=c,d=r("2877"),m=r("24e8"),u=r("f09f"),p=r("a370"),q=r("cb32"),b=r("4b7e"),f=r("9c40"),g=r("7f67"),h=r("eebe"),v=r.n(h),y=Object(d["a"])(l,i,o,!1,null,null,null),O=y.exports;v()(y,"components",{QDialog:m["a"],QCard:u["a"],QCardSection:p["a"],QAvatar:q["a"],QCardActions:b["a"],QBtn:f["a"]}),v()(y,"directives",{ClosePopup:g["a"]});var _=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-banner",{staticClass:"bg-primary text-white text-center"},[e._v("\n    "+e._s(e.title)+"\n  ")]),r("q-card",{staticClass:"my-card"},[e.isLoading?r("div",{staticClass:"flex justify-center"},[r("q-spinner-hourglass",{attrs:{color:"purple",size:"4em"}})],1):r("q-list",[r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"subtitles"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            Клиент\n          ")]),r("q-item-label",{attrs:{caption:""}},[e._v("\n            "+e._s(e.customer)+"\n          ")])],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"subtitles"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            краткое описание\n          ")]),r("q-item-label",{attrs:{caption:""}},[e._v("\n            "+e._s(e.description)+"\n          ")])],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"description"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            что нужно сделать\n          ")]),r("q-item-label",{attrs:{caption:""}},[e._v("\n            "+e._s(e.body)+"\n          ")])],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"price_change"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            стоимость работ\n          ")]),r("q-badge",{staticStyle:{"max-width":"fit-content"},attrs:{color:"positive",outline:"",label:"цена: "+e.price}})],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"event"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            дата и время начала работ\n          ")]),r("div",{staticClass:"flex justify-start"},[r("q-badge",{staticStyle:{"max-width":"fit-content"},attrs:{outline:"",color:"primary",label:e.dueDate}}),r("q-badge",{staticClass:"q-ml-md",staticStyle:{"max-width":"fit-content"},attrs:{outline:"",color:"primary",label:e.dueTime}})],1)],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"home"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            адрес\n          ")]),r("q-item-label",{attrs:{caption:""}},[e._v("\n            "+e._s(e.address)+"\n          ")])],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"timeline"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            статус\n          ")]),r("q-badge",{staticStyle:{"max-width":"fit-content"},attrs:{color:e.statusCurrentOrder,label:e.status}})],1)],1)],1)],1)],1)},C=[],w={name:"OrderHeader",props:{title:{type:String,required:!0,default:""},customer:{type:String,required:!0,default:""},description:{type:String,required:!0,default:""},body:{type:String,required:!0,default:""},price:{type:Number,required:!0,default:0},dueDate:{type:String,required:!0,default:""},dueTime:{type:String,required:!0,default:""},address:{type:String,required:!0,default:""},status:{type:String,required:!0,default:""}},computed:{...Object(s["d"])("orders",["isLoading"]),statusCurrentOrder(){const e={positive:"свободен",info:"в работе",warning:"выполнено"};return this.status?Object.keys(e).find((t=>e[t]===this.status)):null}}},P=w,k=r("54e1"),Q=r("1c1c"),S=r("66e5"),x=r("4074"),j=r("0016"),B=r("0170"),A=r("58a81"),I=r("9149"),$=Object(d["a"])(P,_,C,!1,null,null,null),L=$.exports;v()($,"components",{QBanner:k["a"],QCard:u["a"],QList:Q["a"],QItem:S["a"],QItemSection:x["a"],QIcon:j["a"],QItemLabel:B["a"],QBadge:A["a"],QSpinnerHourglass:I["a"]});var M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-item",[r("q-item-section",{attrs:{side:""}},[r("q-avatar",{attrs:{rounded:"",size:"48px"}},[r("img",{attrs:{src:"https://cdn.quasar.dev/img/avatar.png"}}),r("q-badge",{attrs:{floating:"",color:"teal"}},[e._v("\n        заявка\n      ")])],1)],1),r("q-item-section",[r("q-item-label",[e._v("\n      "+e._s(e.name)+"\n    ")]),r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"q-bg-secondary",attrs:{clickable:"",bordered:"",to:{path:"/performer/"+e.slug}}},[r("q-btn",{attrs:{icon:"send",label:"на страницу мастера"}})],1)],1),e.isCustomer?r("q-item-section",[r("q-btn",{attrs:{color:"purple",label:"принять"},on:{click:e.okPerformer}}),r("q-btn",{staticClass:"q-mt-md",attrs:{color:"deep-orange",label:"отклонить"},on:{click:e.cancelPerformer}})],1):e._e()],1)},N=[],z={name:"PerformerInfoBlock",props:{slug:{type:Number,required:!0},name:{type:String,required:!0}},computed:{isCustomer(){return!0}},methods:{okPerformer(){this.$emit("acceptApplication",this.slug)},cancelPerformer(){this.$emit("rejectApplication",this.slug)}}},H=z,D=r("714f"),E=Object(d["a"])(H,M,N,!1,null,null,null),T=E.exports;v()(E,"components",{QItem:S["a"],QItemSection:x["a"],QAvatar:q["a"],QBadge:A["a"],QItemLabel:B["a"],QBtn:f["a"]}),v()(E,"directives",{Ripple:D["a"]});r("756f");var J={name:"PageOrder",components:{PerformerInfoBlock:T,ConfirmModal:O,OrderHeader:L},data(){return{namePerformer:"Roberto",idPerformer:0,showModal:!1}},computed:{...Object(s["d"])("orders",["currentOrder","isLoading"]),slug(){return this.$route.params.slug},victoryShow(){var e;return null===(e=this.currentOrder.victory)||void 0===e?void 0:e.length},victoryName(){return console.log("112: ",this.currentOrder.victory[0]["name"]),this.currentOrder.victory?this.currentOrder.victory[0]["name"]:null},isShowInfoBlock(){return"свободен"===this.currentOrder.status},isShowButton(){return!this.currentOrder.selectedPerformer},countPerformers(){return this.currentOrder.listOfPerformers?this.currentOrder.listOfPerformers.length:0},isCustomer(){return!0}},methods:{...Object(s["b"])("orders",["getCurrentOrder","addProposal","rejectPerformer","selectPerformer"]),acceptApplication(e){console.log("slug: acceptApplication",e),this.$q.dialog({title:"Подтверждение",message:"Вы дествительно хотите выбрать этого мастера для работы",cancel:"нет",ok:"да",persistent:!0}).onOk((()=>{console.log(">>>> OK, received",e),this.selectPerformer(e)})).onCancel((()=>{console.log(">>>> Cancel")}))},rejectApplication(e){console.log("slug: rejectApplication",e),this.$q.dialog({title:"Подтверждение",message:"Вы дествительно хотите отклонить мастера и удалить из желающих",cancel:"нет",ok:"да",persistent:!0}).onOk((()=>{console.log(">>>> OK, received",e),this.rejectPerformer(e)})).onCancel((()=>{console.log(">>>> Cancel")}))},sendProposal(){console.log("подать заявку"),this.showModal=!1;const e={id:this.idPerformer,name:this.namePerformer};this.idPerformer+=1,this.namePerformer=this.namePerformer+"q",this.addProposal({performer:e,currentOrder:this.currentOrder})},editOrder(){this.$router.push({name:"order",params:{idOrder:this.currentOrder.id}})}},mounted(){const{slug:e}=this.$route.params;this.getCurrentOrder(e)}},K=J,R=r("9989"),F=r("eb85"),G=r("b047"),U=Object(d["a"])(K,a,n,!1,null,null,null);t["default"]=U.exports;v()(U,"components",{QPage:R["a"],QCard:u["a"],QBtn:f["a"],QIcon:j["a"],QSeparator:F["a"],QBanner:k["a"],QSpinnerHourglass:I["a"],QChip:G["a"],QAvatar:q["a"]})}}]);