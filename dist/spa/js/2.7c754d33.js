(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"072a":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",[r("div",{staticClass:"q-pa-md"},[r("div",{staticClass:"q-ma-md"},[r("q-btn-dropdown",{attrs:{color:"primary",disable:e.closeCategory,label:e.currentCategory||"Выбрать категорию для поиска"}},[r("q-list",e._l(e.categoryList,(function(t){return r("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:t.label,attrs:{clickable:""},on:{click:function(r){return e.setCategoryForSearchOrders(t.label)}}},[r("q-item-section",[r("q-item-label",[e._v(e._s(t.label))])],1)],1)})),1)],1),e._v("\n       \n      "),e.currentCategory?r("q-badge",{staticClass:"q-ma-md",attrs:{outline:"",color:"secondary",label:e.currentCategory}}):e._e(),e._v("\n       \n      "),e.currentCategory?r("q-btn",{staticClass:"q-ma-md",attrs:{color:"amber",glossy:"","text-color":"black",icon:"close"},on:{click:e.clearCategory}}):e._e()],1),r("div",{staticClass:"q-ma-md"},[r("q-input",{attrs:{outlined:"",debounce:"2000",disable:e.closeInput,filled:"",label:"Поиск заказа по ключевой фразе"},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}})],1),r("div",{staticClass:"q-ma-md"},[r("q-btn-toggle",{attrs:{push:"",glossy:"",rounded:"","toggle-color":"primary",options:[{label:"свободен",value:"свободен"},{label:"в работе",value:"в работе"},{label:"выполнено",value:"выполнено"}]},model:{value:e.statusOrder,callback:function(t){e.statusOrder=t},expression:"statusOrder"}})],1)]),r("q-item-label",{attrs:{header:""}},[e._v("\n        Общий список заказов\n      ")]),e.orders.length?e._l(e.orders,(function(e){return r("Order",{key:e.id,staticClass:"ordersList",attrs:{slug:e.slug,title:e.title,description:e.description,price:e.price,"selected-performer":e.selectedPerformer,status:e.status}})})):e._e(),r("q-infinite-scroll",{ref:"infiniteScroll",on:{load:e.loadMore},scopedSlots:e._u([{key:"loading",fn:function(){return[r("div",{staticClass:"row justify-center q-my-md"},[r("q-spinner-dots",{attrs:{color:"primary",size:"70px"}})],1)]},proxy:!0}])}),e.orders.length?e._e():r("div",[r("q-banner",{staticClass:"bg-grey-3 text-center q-ma-md",attrs:{dense:""}},[r("h5",[e._v("Ничего не найдено")])])],1)],2)},a=[],o=(r("ddb0"),r("2f62")),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-item",{class:e.selectedPerformer?"bg-light-green-3":"bg-grey-1",attrs:{clickable:"",exact:"",to:{path:"orders/"+e.slug}}},[r("q-item-section",{attrs:{top:"",avatar:""}},[r("q-avatar",{attrs:{color:"primary","text-color":"white",icon:"work"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n        "+e._s(e.title)+"\n      ")]),r("q-item-label",{attrs:{caption:""}},[e._v("\n        "+e._s(e.description)+"\n      ")]),r("q-item-label",{attrs:{caption:""}},[e._v("\n        Подробнее ...\n      ")])],1),r("q-item-section",{attrs:{side:"",top:""}},[r("q-badge",{staticClass:"q-mb-sm",attrs:{color:e.colorBadge,label:e.status,rounded:""}}),r("q-badge",{attrs:{color:"positive",label:"цена: "+e.price}})],1)],1)},i=[],n={name:"Order",props:{slug:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},selectedPerformer:{type:Boolean,required:!0},price:[String,Number],status:{type:String,required:!0}},computed:{colorBadge(){return this.selectedPerformer?"positive":"purple"}}},c=n,d=r("2877"),u=r("66e5"),m=r("4074"),h=r("cb32"),p=r("0170"),g=r("58a81"),b=r("0016"),f=r("eebe"),O=r.n(f),v=Object(d["a"])(c,l,i,!1,null,null,null),y=v.exports;O()(v,"components",{QItem:u["a"],QItemSection:m["a"],QAvatar:h["a"],QItemLabel:p["a"],QBadge:g["a"],QIcon:b["a"]});var q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-input",{attrs:{outlined:"","bottom-slots":"",label:"поиск заказов"},on:{input:e.filterOrders},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.searchText?r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:e.cleanInput}}):e._e(),r("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})},S=[],C=r("1c16"),_={name:"SearchBarOrders",computed:{...Object(o["d"])("orders",["searchOrder"]),searchText:{get(){return this.searchOrder},set(e){this.setSearchOrderString(e)}}},methods:{...Object(o["b"])("orders",["setSearchOrderString","filteredOrders"]),filterOrders(){console.log(112),this.filteredOrders()},cleanInput(){this.searchText="",this.filteredOrders()}},created(){this.filterOrders=Object(C["a"])(this.filterOrders,2e3),this.cleanInput=Object(C["a"])(this.cleanInput,1e3)}},Q=_,x=r("27f9"),P=Object(d["a"])(Q,q,S,!1,null,null,null),$=P.exports;O()(P,"components",{QInput:x["a"],QIcon:b["a"]});var I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-select",{attrs:{outlined:"",options:e.options,"emit-value":"","map-options":"",label:"сортировка заказов клиентов"},model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}})},k=[],B={name:"SortByOrders",data(){return{options:[{label:"по имени",value:"title"},{label:"по цене",value:"price"},{label:"по дате",value:"date"},{label:"по статусу заказа",value:"selectedPerformer"}]}},computed:{...Object(o["d"])("orders",["sortType"]),sortBy:{get(){return this.sortType},set(e){this.setSort(e)}}},methods:{...Object(o["b"])("orders",["setSort"])}},A=B,w=r("ddd8"),F=Object(d["a"])(A,I,k,!1,null,null,null),j=F.exports;O()(F,"components",{QSelect:w["a"]});var N=r("b26a"),T={name:"PageOrders",components:{Order:y,SearchBarOrders:$,SortByOrders:j},data(){return{categoryList:[...N["a"]],currentCategory:"",searchName:"",closeInput:!1,closeCategory:!1,statusOrder:"свободен"}},computed:{...Object(o["d"])("orders",["isLoading","error","orders","ordersCount","offset"])},watch:{searchName(e){e?(this.closeCategory=!0,this.resetOrdersStateAndParamsFetch(),this.$store.commit("orders/addParamsForOrders",{name:e,status:this.statusOrder}),this.getAllOrders(),this.$refs.infiniteScroll.resume()):(this.closeCategory=!1,this.resetOrdersStateAndParamsFetch(),this.$store.commit("orders/addParamsForOrders",{status:this.statusOrder}),this.getAllOrders(),this.$refs.infiniteScroll.resume())},statusOrder(e){console.log(e),this.$store.commit("orders/resetStateOrders"),this.$store.commit("orders/mergeNewParams",{status:this.statusOrder}),this.getAllOrders(),this.$refs.infiniteScroll.resume()}},methods:{...Object(o["b"])("orders",["getAllOrders"]),resetOrdersStateAndParamsFetch(){this.$store.commit("orders/resetStateOrders"),this.$store.commit("orders/resetParamsForOrders")},loadMore(e,t){if(0===this.orders.length)return this.$refs.infiniteScroll.resume(),void t();this.ordersCount>this.orders.length?(this.$store.commit("orders/setOffset",20),this.getAllOrders().then((()=>t()))):this.orders.length>=this.ordersCount&&this.$refs.infiniteScroll.stop()},setCategoryForSearchOrders(e){this.currentCategory=e,this.closeInput=!0,this.resetOrdersStateAndParamsFetch(),this.$store.commit("orders/addParamsForOrders",{category:e,status:this.statusOrder}),this.getAllOrders(),this.$refs.infiniteScroll.resume()},clearCategory(){this.currentCategory="",this.closeInput=!1,this.searchName="",this.resetOrdersStateAndParamsFetch(),this.$store.commit("orders/addParamsForOrders",{status:this.statusOrder}),this.getAllOrders(),this.$refs.infiniteScroll.resume()}},mounted(){this.resetOrdersStateAndParamsFetch(),this.$store.commit("orders/addParamsForOrders",{status:this.statusOrder}),this.getAllOrders()}},L=T,E=(r("1d57"),r("9989")),D=r("f20b"),J=r("1c1c"),M=r("9c40"),z=r("6a67"),G=r("ef35"),H=r("8380"),K=r("54e1"),R=r("4983"),U=r("7f67"),V=Object(d["a"])(L,s,a,!1,null,"4656c468",null);t["default"]=V.exports;O()(V,"components",{QPage:E["a"],QBtnDropdown:D["a"],QList:J["a"],QItem:u["a"],QItemSection:m["a"],QItemLabel:p["a"],QBadge:g["a"],QBtn:M["a"],QInput:x["a"],QBtnToggle:z["a"],QInfiniteScroll:G["a"],QSpinnerDots:H["a"],QBanner:K["a"],QScrollArea:R["a"]}),O()(V,"directives",{ClosePopup:U["a"]})},"1d57":function(e,t,r){"use strict";r("50fe")},"50fe":function(e,t,r){},b26a:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));const s=[{label:"Демонтажные работы",value:"Демонтажные работы",color:"green"},{label:"Строительные работы",value:"Строительные работы",color:"green"},{label:"Возведение стен из блоков",value:"Возведение стен из блоков",color:"green"},{label:"Утепление балконов и лоджий (с присоединением помещений)",value:"Утепление балконов и лоджий (с присоединением помещений)",color:"green"},{label:"Малярно-штукатурные работы",value:"Малярно-штукатурные работы",color:"green"},{label:"Выравнивание стен и потолков",value:"Выравнивание стен и потолков",color:"green"},{label:"Шпатлевание стен и потолков",value:" Шпатлевание стен и потолков",color:"green"},{label:"Шлифовка поверхностей",value:"Шлифовка поверхностей",color:"green"},{label:"Оклейка стен обоями (всех видов)",value:"Оклейка стен обоями (всех видов)",color:"green"},{label:"Столярно-плотницкие работы",value:"Столярно-плотницкие работы",color:"green"},{label:"Установка межкомнатных дверей",value:"Установка межкомнатных дверей",color:"green"},{label:"Монтаж стен из гипсокартона",value:"Монтаж стен из гипсокартона",color:"green"},{label:"Устройство полов",value:"Устройство полов",color:"green"},{label:"Сантехнические работы",value:"Сантехнические работы",color:"green"},{label:"Электромонтажные работы",value:"Электромонтажные работы",color:"green"},{label:"Вентиляционные работы",value:"Вентиляционные работы",color:"green"},{label:"Доставка стройматериалов для ремонта",value:"Доставка стройматериалов для ремонта",color:"green"}]}}]);