(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"37e8f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",{staticClass:"q-pa-md"},[e.currentOrder?[r("OrderHeader",{attrs:{customer:e.currentOrder.user.username,body:e.currentOrder.body,price:e.currentOrder.price,description:e.currentOrder.description,title:e.currentOrder.title,address:e.currentOrder.address,"due-date":e.currentOrder.dueDate,"due-time":e.currentOrder.dueTime,status:e.currentOrder.status,"favorites-count":e.currentOrder.favoritesCount,slug:e.currentOrder.slug}})]:e._e(),(e.currentOrder?!e.currentOrder.victory:void 0)?r("q-card",{staticClass:"my-card q-mt-md"},[r("h6",{staticClass:"no-margin text-center"},[e._v("\n          заявки поданные на текущий заказ\n        ")]),r("q-separator"),[e.listOfPerformersOnCurrentOrder.length?e._l(e.listOfPerformersOnCurrentOrder,(function(t){return r("PerformerInfoBlock",{key:t.id,attrs:{id:t.id,name:t.username},on:{acceptApplication:e.acceptApplication}})})):r("q-banner",{staticClass:"bg-secondary text-white text-center",attrs:{rounded:""}},[e._v("\n            пока никто не подал заявок\n          ")])]],2):e._e(),e.isSubmitApplicationOrder?r("q-card",{staticClass:"my-card q-mt-md"},[r("div",{staticClass:"flex justify-around q-pt-md q-pb-md "},[r("q-btn",{attrs:{color:"purple",label:"подать заявку",disable:e.isLoading},on:{click:e.submitApplicationOnOrder}},[e._v("\n             \n            "),r("q-icon",{attrs:{right:"",size:"2em",name:"schedule_send"}})],1)],1)]):e._e()],2)},i=[],n=r("2f62"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-dialog",{attrs:{persistent:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("q-card",[r("q-card-section",{staticClass:"text-center q-pb-none"},[r("q-avatar",{attrs:{icon:"error_outline",color:"orange","text-color":"white"}})],1),r("q-card-section",[r("span",{staticClass:"q-ml-sm"},[e._v("\n          "+e._s(e.label)+"\n        ")])]),r("q-card-actions",{attrs:{align:"center"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.buttonCancel,color:"purple"}}),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.buttonOk,color:"purple"},on:{click:e.onOk}})],1)],1)],1)},o=[],c={name:"ConfirmModal",props:{show:{type:Boolean,required:!0},label:{type:String,required:!0},buttonCancel:{type:String,required:!0},buttonOk:{type:String,required:!0}},methods:{onOk(){this.$emit("onOk")}}},l=c,d=r("2877"),u=r("24e8"),m=r("f09f"),p=r("a370"),q=r("cb32"),b=r("4b7e"),O=r("9c40"),f=r("7f67"),h=r("eebe"),g=r.n(h),v=Object(d["a"])(l,s,o,!1,null,null,null),y=v.exports;g()(v,"components",{QDialog:u["a"],QCard:m["a"],QCardSection:p["a"],QAvatar:q["a"],QCardActions:b["a"],QBtn:O["a"]}),g()(v,"directives",{ClosePopup:f["a"]});var _=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-banner",{staticClass:"bg-primary text-white",attrs:{"inline-actions":""},scopedSlots:e._u([{key:"action",fn:function(){return[r("q-btn",{attrs:{round:"",color:"secondary",icon:"thumb_up_off_alt"},on:{click:e.liked}}),r("q-btn",{attrs:{round:"",color:"deep-orange",icon:"favorite"}},[e._v("\n        "+e._s(e.favoritesCount)+"\n      ")]),r("q-btn",{attrs:{round:"",color:"secondary",icon:"thumb_down_off_alt"},on:{click:e.disliked}})]},proxy:!0}])},[e._v("\n    "+e._s(e.title)+"\n    ")]),r("q-card",{staticClass:"my-card"},[r("q-list",[r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"subtitles"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            Клиент\n          ")]),r("q-item-label",{attrs:{caption:""}},[e._v("\n            "+e._s(e.customer)+"\n          ")])],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"subtitles"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            краткое описание\n          ")]),r("q-item-label",{attrs:{caption:""}},[e._v("\n            "+e._s(e.description)+"\n          ")])],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"description"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            что нужно сделать\n          ")]),r("q-item-label",{attrs:{caption:""}},[e._v("\n            "+e._s(e.body)+"\n          ")])],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"price_change"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            стоимость работ\n          ")]),r("q-badge",{staticStyle:{"max-width":"fit-content"},attrs:{color:"positive",outline:"",label:"цена: "+e.price}})],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"event"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            дата и время начала работ\n          ")]),r("div",{staticClass:"flex justify-start"},[r("q-badge",{staticStyle:{"max-width":"fit-content"},attrs:{outline:"",color:"primary",label:e.dueDate}}),r("q-badge",{staticClass:"q-ml-md",staticStyle:{"max-width":"fit-content"},attrs:{outline:"",color:"primary",label:e.dueTime}})],1)],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"home"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            адрес\n          ")]),r("q-item-label",{attrs:{caption:""}},[e._v("\n            "+e._s(e.address)+"\n          ")])],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"primary",name:"timeline"}})],1),r("q-item-section",[r("q-item-label",[e._v("\n            статус\n          ")]),r("q-badge",{staticStyle:{"max-width":"fit-content"},attrs:{color:e.statusCurrentOrder,label:e.status}})],1)],1)],1)],1)],1)},C=[],k={name:"OrderHeader",props:{title:{type:String,required:!0,default:""},customer:{type:String,required:!0},description:{type:String,required:!0},body:{type:String,required:!1,default:""},price:{type:[String,Number],required:!0,default:0},dueDate:{type:String,required:!0},dueTime:{type:String,required:!0},address:{type:String,required:!0},status:{type:String,required:!0},favoritesCount:{type:[String,Number],required:!0},slug:{type:String,required:!0}},computed:{...Object(n["d"])("orders",["isLoading"]),...Object(n["c"])("authorization",["idUser"]),statusCurrentOrder(){const e={positive:"свободен",info:"в работе",warning:"выполнено"};return this.status?Object.keys(e).find((t=>e[t]===this.status)):null}},methods:{...Object(n["b"])("orders",["likedOrder","dislikedOrder"]),liked(){this.likedOrder(this.slug)},disliked(){this.dislikedOrder(this.slug)}}},Q=k,S=r("54e1"),w=r("1c1c"),x=r("66e5"),P=r("4074"),j=r("0016"),A=r("0170"),B=r("58a81"),$=Object(d["a"])(Q,_,C,!1,null,null,null),I=$.exports;g()($,"components",{QBanner:S["a"],QBtn:O["a"],QCard:m["a"],QList:w["a"],QItem:x["a"],QItemSection:P["a"],QIcon:j["a"],QItemLabel:A["a"],QBadge:B["a"]});var N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",[r("q-item",{staticClass:"flex justify-between"},[r("q-avatar",{attrs:{rounded:"",size:"48px"}},[r("img",{attrs:{src:"https://cdn.quasar.dev/img/avatar.png"}}),r("q-badge",{attrs:{floating:"",color:"teal"}},[e._v("\n        заявка\n      ")])],1),r("q-btn",{attrs:{icon:"send",label:"на страницу мастера",to:{path:"/performer/"+e.id}}})],1),r("q-item",{staticClass:"flex justify-between"},[e._v("\n      "+e._s(e.name)+"\n      "),e.isOrderOwner?r("q-btn",{attrs:{color:"purple",label:"сделать победителем"},on:{click:e.okPerformer}}):e._e()],1),r("q-separator")],1)},U=[],z={name:"PerformerInfoBlock",props:{id:{type:[Number,String],required:!0},name:{type:String,required:!0}},computed:{...Object(n["d"])("orders",["currentOrder"]),...Object(n["c"])("authorization",["idUser"]),isOrderOwner(){return this.idUser===this.currentOrder.user.id}},methods:{okPerformer(){this.$emit("acceptApplication",this.id)}}},E=z,L=r("eb85"),D=Object(d["a"])(E,N,U,!1,null,null,null),H=D.exports;g()(D,"components",{QCard:m["a"],QItem:x["a"],QAvatar:q["a"],QBadge:B["a"],QBtn:O["a"],QSeparator:L["a"]});var M=r("cf57"),T={name:"PageOrder",components:{PerformerInfoBlock:H,ConfirmModal:y,OrderHeader:I},data(){return{idPerformer:0,showModal:!1,slugOrder:""}},computed:{...Object(n["d"])("orders",["currentOrder","isLoading","listOfPerformersOnCurrentOrder"]),...Object(n["c"])("authorization",["customer","performer","idUser"]),isShowBlockSubmitApplication(){},isSubmitApplicationOrder(){if(this.currentOrder){const e=this.currentOrder.listOfPerformers.some((e=>Number(e)===this.idUser));return this.performer&&!this.currentOrder.selectedPerformer&&!e}},isEditOrder(){const e=this.idUser===this.currentOrder.user.id;return e&&!this.currentOrder.victory}},methods:{...Object(n["b"])("orders",["getCurrentOrder","addProposal","selectPerformer"]),submitApplicationOnOrder(){this.$q.loading.show({spinner:M["a"],spinnerColor:"red",message:"Идёт загрузка"}),this.addProposal(this.slugOrder).then((()=>this.$q.loading.hide())).catch((()=>this.$q.loading.hide()))},acceptApplication(e){this.$q.dialog({title:"Подтверждение",message:"Вы дествительно хотите выбрать этого мастера для работы",cancel:"нет",ok:"да",persistent:!0}).onOk((()=>{console.log(">>>> OK, received",e),this.selectPerformer({id:e,slugOrder:this.slugOrder})})).onCancel((()=>{console.log(">>>> Cancel")}))}},mounted(){const{slug:e}=this.$route.params;this.slugOrder=e,this.getCurrentOrder(e)}},J=T,K=r("9989"),F=r("b047"),G=Object(d["a"])(J,a,i,!1,null,null,null);t["default"]=G.exports;g()(G,"components",{QPage:K["a"],QCard:m["a"],QSeparator:L["a"],QBanner:S["a"],QBtn:O["a"],QIcon:j["a"],QChip:F["a"],QAvatar:q["a"]})}}]);